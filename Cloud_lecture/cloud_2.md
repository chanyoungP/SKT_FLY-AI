# Cloud_2 Azure network 

## 가상 네트워크 
> Vnet을 사용하면,가상머신,데이터베이스,웹앱 등의 리소스를 하나의 네트워크에 연결할 수 있다.

### 서브넷
> 가상네트워크는 서브넷으로 구성된다. 서브넷은 vnet의 ip주소 범위 내에서 논리적으로 분할된 네트워크 세그먼트를 나타낸다.서브넷은 리소스를 그룹화하고 관리할 수 있도록 도와주는 역할 

### 가상 네트워크 피어링
> 다른 가상 네트워크와 가상 네트워크를 연결하는 기능. 이를 통해서 VM1 과 VM2를 네트워크상으로 연결하고 통신할 수 있다. 

### 네트워크 보안 그룹 (NSG)
> 가상 네트워크 수준에서 트래픽을 제어하는 방화벽 규칙 집합
> 기본적으로 따로 설정을 안해두면, 모두 막혀있어서 만약에 웹 서비스를 한다면 HTTP 포트를 열어줘야한다.

## 네트워크 인터페이스 
> 가상 머신과 Vnet(가상 네트워크)간의 연결
> 가상 머신은 하나 이상의 NIC(network interface)가 필요함.
> 가상 머신과 연결된 NIC는 가상 머신과 동일한 위치에 있어야함.
> 가상 머신을 만든 후에는 VM에 연결된 서브넷을 변경 가능하나 Vnet은 변경 불가능 

## 가상 네트워크 실습 
1. 가상 네트워크 선택
   - 가상 네트워크 검색
   - 만들기
   - 리소스 그룹 선택
   - 가상네트워크 이름 지정
   - 가상네트워크 지역 설정
   - 다음 클릭
   - 보안 파트는 스킵
2. 서브넷 설정
   - IP 주소 공간
   - 서브넷 추가
   - 시작주소 10.0.1.0 세팅, 이름 frontend, 크기 24

3. 가상 네트워크 생성
   - 검토만들기 (가상 네트워크 공간을 정의만 한 것)    

4. 만들어진 가상 네트워크안에 윈도우 서버
   - 만들어진 가상 네트워크 클릭해서 서브넷 클릭
   - 사용가능한 IP 확인  251개의 ip를 이용해서 가상 머신 배치 가능
   - 가상 머신 선택
   - 만들기
   - 리소스그룹 선택
   - 가상머신이름선택
   - 가용성영역 없음
   - 보안유형 표준
   - 이미지 : 윈도우 서버 2019 데이터 센터 
   - 사용자이름 비밀번호 설정 
   - 인바운드 포트 (윈도우라 RDP 포트)
   - 라이선싱 설정 필요없음 
   - 디스크 넘어가서 표준 SSD
   - 네트워킹 넘어가서 만들어진 가상 네트워크 선택 
   - 서브넷도 만들어진 서브넷 설정
   - 모니터 -> 부트진단 사용안함
   - 확장 설치 microsoft antimalware 설치
   - 검토 만들기 

## 네트워크 보안 그룹 제대로 보기 

### 인바운드 아웃바운드 네트워크 트래픽 허용 및 거부

### 서브넷 또는 네트워크 인터페이스 연결

### 기본 보안 규칙 
- 인바운드 규칙 : 모든 트래픽 차단
- 아웃바운드 규칙 : 허용 
- 우선순위를 이용해서 추가 적용할 수 있다. 



